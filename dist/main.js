(()=>{"use strict";(function(e){const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds"),c=document.querySelector("#timer"),a=setInterval((function(){const r=function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),n=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60),minutes:n,seconds:o}}();r.timeRemaining>=0?(t.textContent=r.hours+" :",o.textContent=r.minutes+" :",n.textContent=r.seconds,r.hours<10&&(t.textContent="0"+r.hours+" :"),r.minutes<10&&(o.textContent="0"+r.minutes+" :"),r.seconds<10&&(n.textContent="0"+r.seconds)):(clearInterval(a),c.textContent=`Акция закончилась: ${e}`)}),1e3)})("31 December 2020 "),(()=>{const e=document.querySelector(".menu"),t=document.querySelector("menu"),o=()=>{t.classList.toggle("active-menu")};e.addEventListener("click",o),t.addEventListener("click",(e=>{const t=e.target;(t.classList.contains("close-btn")||t.closest("ul>li>a"))&&o()}))})(),(()=>{const e=document.querySelector("main>a");e.addEventListener("click",(t=>{t.preventDefault();const o=document.querySelector(e.getAttribute("href")).getBoundingClientRect().top+window.pageYOffset,n=setInterval((()=>{const e=o/100;e>window.pageYOffset-o&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,o),clearInterval(n))}),5)}));document.querySelector("menu>ul").addEventListener("click",(e=>{const t=e.target;e.preventDefault();const o=document.querySelector(t.getAttribute("href")).getBoundingClientRect().top+window.pageYOffset,n=setInterval((()=>{const e=o/100;e>window.pageYOffset-o&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,o),clearInterval(n))}),5)}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector("#service-block"),o=document.querySelector(".popup-content");t.addEventListener("click",(t=>{t.target.matches(".popup-btn")&&(e.style.display="block",window.innerWidth>768&&(()=>{o.style.transform="translate(-50%)";let e=-100;const t=()=>{e+=5,o.style.left=`${e}%`;const n=requestAnimationFrame(t);50===e&&cancelAnimationFrame(n)};requestAnimationFrame(t)})())})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=e.target.closest(".service-header-tab"),n&&t.forEach(((e,c)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");for(let t=0;t<e.length;t++){const e=document.createElement("li");e.classList.add("dot"),o.insertAdjacentElement("afterbegin",e)}const n=document.querySelectorAll(".dot");n[0].classList.add("dot-active");let c,a=0;const r=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},l=()=>{r(e,a,"portfolio-item-active"),r(n,a,"dot-active"),a++,a>=e.length&&(a=0),s(e,a,"portfolio-item-active"),s(n,a,"dot-active")},i=(e=3e3)=>{c=setInterval(l,e)};t.addEventListener("click",(t=>{t.preventDefault();const o=t.target;o.matches(".portfolio-btn, .dot")&&(r(e,a,"portfolio-item-active"),r(n,a,"dot-active"),o.matches("#arrow-right")?a++:o.matches("#arrow-left")?a--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(a=t)})),a>=e.length&&(a=0),a<0&&(a=e.length-1),s(e,a,"portfolio-item-active"),s(n,a,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(c)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),(()=>{const e=document.querySelector(".command"),t={};e.addEventListener("mouseover",(e=>{const o=e.target;o.matches(".command__photo")&&(t[o.dataset.img]=o.src,o.src=o.dataset.img)})),e.addEventListener("mouseout",(e=>{const o=e.target;o.matches(".command__photo")&&(o.src=t[o.dataset.img])}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),r=document.getElementById("total");let s;t.addEventListener("change",(t=>{const l=t.target;(l.matches("select")||l.matches("input"))&&(()=>{let t=0,l=1,i=1,u=0;const d=o.options[o.selectedIndex].value,m=+n.value;c.value>1&&(l+=(c.value-1)/10),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),d&&m&&(t=e*d*m*l*i),cancelAnimationFrame(s);const h=()=>{s=requestAnimationFrame(h,50),u<t&&t<5e3?(u+=50,r.textContent=u):u<t&&t>5e3?(u+=1e3,r.textContent=u):u>t&&(cancelAnimationFrame(s),r.textContent=Math.floor(t)),o.addEventListener("input",(()=>{r.textContent=0,n.value="",a.value="",c.value=""}))};s=requestAnimationFrame(h)})()})),t.addEventListener("input",(e=>{const t=e.target;(t.matches(".calc-square")||t.matches(".calc-count")||t.matches(".calc-day"))&&(t.value=t.value.replace(/\D/,""))}))})(100),(()=>{alert();let e=[];const t='example "Иван"',o='example "+79078425469"',n='example "vika@gmail.com"',c="Разрешенно вводить только кириллицу, пробелы, цифры и знаки препинания.",a=document.createElement("div"),r=document.querySelectorAll("input[id]");a.style.color="white",console.log("formInputs: ",r);const s=document.querySelector(".sk-wave");r.forEach((e=>{}));const l=document.querySelectorAll('[name="user_form"]');function i(){setTimeout((()=>{a.textContent=""}),5e3)}function u(t,o){t?(e.push(o),o.style.boxShadow="0 0 5px 5px red"):(e=e.filter((e=>e!==o)),o.style.boxShadow="0 0 5px 5px green")}function d(e){return e.value=e.value.replace(/[a-z0-9?@!,.=_'"/+*)(}{\][|;:\\-]/gi,""),/^[а-яА-Я\s]{3,20}$/.test(e.value)}function m(e){return e.value=e.value.replace(/[a-zA-Zа-яА-ЯЁё?@!,.=_'"/*}{\][|;:-]/gi,""),/^\+?\d{11}$/.test(e.value)}function h(e){return e.value=e.value.replace(/[а-яА-Я?!,+='"/*)(}{\][|;:\\-]/gi,""),/\w+@\w+\.\w{2,4}$/g.test(e.value)}function p(e){return e.value=e.value.replace(/[^а-яА-Я\s!,\\.\\?\d]+/gi,""),/^[а-яА-Я\s\d\\.,!\\?-\\:]{1,}$/g.test(e.value)}function v(e){[...e.elements].filter((e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type)).forEach((e=>{e.value="",e.style.boxShadow=""}))}console.log("userFormelem: ",l),document.addEventListener("submit",(t=>{t.preventDefault(),function(t){t.appendChild(a),a.textContent="",s.style.display="block",a.appendChild(s);const o=new FormData(t),n={};for(const e of o.entries())n[e[0]]=e[1];e.length?(a.textContent="Поля заполнены не корректно",i()):function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}(n).then((e=>{if(200!==e.status)throw new Error("status network mot 200");a.textContent="Спасибо! Мы скоро с вами свяжемся!",i(),v(t)})).catch((e=>{a.textContent="Что то пошло не так",i(),console.log(e),v(t)}))}(t.target)})),document.addEventListener("focus",(e=>{const a=e.target;console.log(a),a.matches('[name="user_name"]')&&a.setAttribute("placeholder",t),a.matches(".form-phone")&&a.setAttribute("placeholder",o),a.matches(".form-email")&&a.setAttribute("placeholder",n),a.matches(".mess")&&a.setAttribute("placeholder",c)})),document.addEventListener("change",(e=>{const a=e.target;console.log("target: change",a),a.matches('[name="user_name"]')&&(d(a)?(a.setAttribute("placeholder","Ваше имя"),u(!d(a),a)):(a.setAttribute("placeholder",t),u(!d(a),a))),a.matches(".form-phone")&&(m(a)?(a.setAttribute("placeholder","Номер телефона"),u(!m(a),a)):(a.setAttribute("placeholder",o),u(!m(a),a))),a.matches(".form-email")&&(h(a)?(a.setAttribute("placeholder","E-mail"),u(!h(a),a)):(a.setAttribute("placeholder",n),u(!h(a),a))),a.matches(".mess")&&(p(a)?(a.setAttribute("placeholder","Ваше сообщение"),u(!p(a),a)):(a.setAttribute("placeholder",c),u(!p(a),a)))}))})()})();